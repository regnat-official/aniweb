<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="anime-title"></title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1 id="anime-name"></h1>
        <nav>
            <a href="index.html">Назад к главной</a>
        </nav>
    </header>

    <main>
        <section id="anime-details">
            <h2>Жанр: <span id="anime-genre"></span></h2>
            <p id="anime-description"></p>
            <label for="dub-select">Выберите озвучку:</label>
            <select id="dub-select"></select>
            <button id="watch-button">Смотреть</button>
        </section>

        <section id="video-section" style="display: none;">
            <h2>Смотреть аниме</h2>
            <video id="anime-video" controls width="600">
                <source id="video-source" src="" type="video/mp4">
                Ваш браузер не поддерживает видео.
            </video>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Aniweb. Все права защищены.</p>
    </footer>

    <script>
        const params = new URLSearchParams(window.location.search);
        const title = params.get('title');
        
        fetch('anime_data.json')
            .then(response => response.json())
            .then(data => {
                const anime = data.find(a => a.title === title);
                if (anime) {
                    document.getElementById('anime-title').innerText = anime.title;
                    document.getElementById('anime-name').innerText = anime.title;
                    document.getElementById('anime-genre').innerText = anime.genre;
                    document.getElementById('anime-description').innerText = anime.description;

                    const dubSelect = document.getElementById('dub-select');
                    anime.dubs.forEach(dub => {
                        const option = document.createElement('option');
                        option.value = dub;
                        option.innerText = dub;
                        dubSelect.appendChild(option);
                    });

                    document.getElementById('watch-button').addEventListener('click', function() {
                        const selectedDub = document.getElementById('dub-select').value;
                        alert(`Вы выбрали озвучку: ${selectedDub}`);

                        // Здесь устанавливаем URL видео
                        const videoSource = document.getElementById('video-source');
                        videoSource.src = anime.video_url;
                        document.getElementById('anime-video').load();

                        // Показываем плеер
                        document.getElementById('video-section').style.display = 'block';
                    });
                }
            });
    </script>
</body>
</html>

